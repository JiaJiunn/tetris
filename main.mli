(** Init and main function, and functions to transit between game states. *) 